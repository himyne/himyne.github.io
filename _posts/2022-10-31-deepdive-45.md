---
published: true
layout: single
title: "[JS] ëª¨ë˜ Javascript Deep Dive 45ìž¥ - í”„ë¡œë¯¸ìŠ¤"

categories:
  - DeepDive

tags:
  - Deepdive
  - Promise

toc: true
toc_sticky: true
toc_label: "45ìž¥ - í”„ë¡œë¯¸ìŠ¤"
---
# [01] ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì 

## 1) ì½œë°± í—¬

```jsx
// ë¹„ë™ê¸° í•¨ìˆ˜
function get(url) {
  // XMLHttpRequest ê°ì²´ ìƒì„±
  const xhr = new XMLHttpRequest();

  // ì„œë²„ ì‘ë‹µ ì‹œ í˜¸ì¶œë  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  xhr.onreadystatechange = function () {
    // ì„œë²„ ì‘ë‹µ ì™„ë£Œê°€ ì•„ë‹ˆë©´ ë¬´ì‹œ
    if (xhr.readyState !== XMLHttpRequest.DONE) return;

    if (xhr.status === 200) {
      // ì •ìƒ ì‘ë‹µ
      console.log(xhr.response);
      // ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ê²°ê³¼ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ë°˜í™˜í•  ìˆ˜ ì—†ë‹¤.
      return xhr.response; // â‘ 
    } else {
      // ë¹„ì •ìƒ ì‘ë‹µ
      console.log("Error: " + xhr.status);
    }
  };

  // ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ Request ì˜¤í”ˆ
  xhr.open("GET", url);
  // Request ì „ì†¡
  xhr.send();
}

// ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ì˜ readystatechange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜(â‘ )í•˜ë©´ ìˆœì„œê°€ ë³´ìž¥ë˜ì§€ ì•ŠëŠ”ë‹¤.
const res = get("http://jsonplaceholder.typicode.com/posts/1");
console.log(res); // â‘¡ undefined
```

ìœ„ ì½”ë“œë¥¼ í†µí•´ ê°„ë‹¨ížˆ ì½œë°± í—¬ì´ë¼ëŠ” ê°œë…ì— ëŒ€í•´ ìš”ì•½í•´ë³´ê² ë‹¤.

ë¨¼ì € í¬ê²Œ console.log ì‹¤í–‰ ë¶€ë¶„ê³¼ get ë¹„ë™ê¸° í•¨ìˆ˜ë¡œ ì½”ë“œë¥¼ ë‚˜ëˆ„ì–´ì„œ ë³´ìž.

res ë³€ìˆ˜ì— urlì„ ì¸ìžë¡œ ë„˜ê²¨ì¤€ get í•¨ìˆ˜ë¥¼ ë‹´ì•„ì£¼ì—ˆë‹¤. ê·¸ë¦¬ê³  ë‚˜ì„œ console.log(res)ë¡œ get í•¨ìˆ˜ì˜ ëŒ€í•œ ê²°ê³¼ë¥¼ í™•ì¸í–ˆë”ë‹ˆ undefinedê°€ ì¶œë ¥ë˜ì—ˆë‹¤.

ê·¸ ì´ìœ ëŠ” get í•¨ìˆ˜ê°€ ë¹„ë™ê¸° í•¨ìˆ˜ë¼ì„œ console.log ë¬¸ì´ ì¢…ë£Œë˜ì–´ ì½œ ìŠ¤íƒì´ ë¹„ì–´ì•¼ get í•¨ìˆ˜ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ê²°êµ­, get í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê°€ì§€ê³  í›„ì† ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ì—†ëŠ” â€œì½œë°± í—¬â€ í˜„ìƒì´ ì¼ì–´ë‚œ ê²ƒì´ë‹¤.

## 2) ì—ëŸ¬ ì²˜ë¦¬ì˜ í•œê³„

```jsx
try {
  // throw ì—°ì‚°ìž : ì—ëŸ¬ë¥¼ ìƒì„±í•¨
  setTimeout(() => {
    throw new Error("Error!");
  }, 1000);
} catch (e) {
  console.log("ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•œë‹¤..");
  console.log(e);
}
```

try ë¸”ë¡ ë‚´ì—ì„œ setTimeout í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ 1ì´ˆ í›„ì— ì½œë°± í•¨ìˆ˜ ì•ˆì˜ ë¬¸ì´ ì‹¤í–‰ëœë‹¤.

ì›ëž˜ëŠ” ì½œë°± í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ìžˆìœ¼ë¯€ë¡œ catch ë¸”ë¡ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ì§€ë§Œ ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•œë‹¤.

ê·¸ ì´ìœ ëŠ” setTimeout í•¨ìˆ˜ê°€ ë¹„ë™ê¸° í•¨ìˆ˜ì´ë¯€ë¡œ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ì¢…ë£Œë˜ì–´ í˜¸ì¶œ ìŠ¤íƒì—ì„œ ì œê±°ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ES6ì—ì„œ Promiseê°€ ë„ìž…ë˜ì—ˆë‹¤.

# [02] í”„ë¡œë¯¸ìŠ¤ì˜ ìƒì„±

Promise ìƒì„±ìž í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìžì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

í”„ë¡œë¯¸ìŠ¤ ê°ì²´ëŠ” String, Numberì™€ ê°™ì€ í‘œì¤€ ë¹ŒíŠ¸ì¸ ê°ì²´ì´ë‹¤.

Promise ìƒì„±ìž í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ìž‘ì—…ì„ ìˆ˜í–‰í•  ì½œë°± í•¨ìˆ˜ë¥¼ resolveì™€ reject í•¨ìˆ˜ë¥¼ ì¸ìžë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

ì—¬ê¸°ì„œ resolve ì™€ reject í•¨ìˆ˜ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìžì²´ ì œê³µí•˜ëŠ” ì½œë°±í•¨ìˆ˜ì´ë‹¤.

```jsx
// Promise ê°ì²´ì˜ ìƒì„±
const promise = new Promise((resolve, reject) => {
	if (/*ë¹„ë™ê¸° ìž‘ì—… ìˆ˜í–‰ ì„±ê³µ */) {
		resolve('result');
	}
	else { /* ë¹„ë™ê¸° ìž‘ì—… ìˆ˜í–‰ ì‹¤íŒ¨ */
		reject('failure reason');
	}
});
```

PromiseëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì„±ê³µ(fulfilled)í•˜ì˜€ëŠ”ì§€ ë˜ëŠ” ì‹¤íŒ¨(rejected)í•˜ì˜€ëŠ”ì§€ ë“±ì˜ ìƒíƒœ(state) ì •ë³´ë¥¼ ê°–ëŠ”ë‹¤.


| ìƒíƒœ      | ì˜ë¯¸                                       | êµ¬í˜„                                               |
| --------- | ------------------------------------------ | -------------------------------------------------- |
| pending   | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì•„ì§ ìˆ˜í–‰ë˜ì§€ ì•Šì€ ìƒíƒœ      | resolve ë˜ëŠ” reject í•¨ìˆ˜ê°€ ì•„ì§ í˜¸ì¶œë˜ì§€ ì•Šì€ ìƒíƒœ |
| fulfilled | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì„±ê³µ)           | resolve í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìƒíƒœ                         |
| rejected  | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì‹¤íŒ¨)           | reject í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìƒíƒœ                          |
| settled   | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨) | resolve ë˜ëŠ” reject í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìƒíƒœ             |

ë³´í†µ ì²˜ìŒì—ëŠ” â€œpendingâ€(ë³´ë¥˜) ì˜€ë‹¤ê°€ resolveê°€ í˜¸ì¶œë˜ë©´ valueë¡œ, rejectê°€ í˜¸ì¶œë˜ë©´ errorë¡œ ë³€í•œë‹¤.

ì•„ëž˜ëŠ” Promiseì˜ ìƒíƒœì™€ ê²°ê³¼ê°’ì´ ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ë³€í™”ëœë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚¸ ê·¸ë¦¼ì´ë‹¤.

![Untitled](/assets/images/45-1.png))

```jsx
// fulfilled promise(ì•½ì†ì´ ì´í–‰ëœ í”„ë¼ë¯¸ìŠ¤)
let promise = new Promise(function (resolve, reject) {
  // í”„ë¼ë¯¸ìŠ¤ê°€ ë§Œë“¤ì–´ì§€ë©´ executor í•¨ìˆ˜ê°€ ìžë™ìœ¼ë¡œ ì‹¤í–‰

  // 1ì´ˆ ë’¤ì— ì¼ì´ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ë‹¤ëŠ” ì‹ í˜¸ê°€ ì „ë‹¬ë˜ë©´ì„œ resultëŠ” 'ì™„ë£Œ'ê°€ ëœë‹¤.
  setTimeout(() => resolve("ì™„ë£Œ"), 1000);
});

// ì•½ì†í•œ ìž‘ì—…ì„ ê±°ë¶€í•˜ëŠ” ê²½ìš°
let promise = new Promise(function (resolve, reject) {
  // 1ì´ˆ ë’¤ì— ì—ëŸ¬ì™€ í•¨ê»˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ì—ˆë‹¤ëŠ” ì‹ í˜¸ë¥¼ ë³´ë‚¸ë‹¤.
  setTimeout(() => reject(new Error("ì—ëŸ¬ ë°œìƒ!")), 1000);
});
```

í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœì™€ ê²°ê³¼ê°’ì€ ìœ„ ì½”ë“œì—ì„œ resolveê°€ í˜¸ì¶œë˜ë©´ ê·¸ë¦¼ì—ì„œ íŒŒëž€ìƒ‰ ë°•ìŠ¤ê°€ ë  ê²ƒì´ê³  rejectê°€ í˜¸ì¶œë˜ë©´ ë¹¨ê°„ìƒ‰ ë°•ìŠ¤ê°€ ë˜ëŠ” ê²ƒì´ë‹¤.

ê·¸ë¦¬ê³  íŒŒëž€ìƒ‰ ë°•ìŠ¤ì™€ ë¹¨ê°„ìƒ‰ ë°•ìŠ¤ ëª¨ë‘ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì˜ ìƒíƒœê°€ ë³€í™”í–ˆìœ¼ë¯€ë¡œ ì²˜ë¦¬ëœ(settled) í”„ë¡œë¯¸ìŠ¤ë¼ê³  ë¶€ë¥¸ë‹¤. ë°˜ëŒ€ë¡œ ì™¼ìª½ì˜ ê²€ì€ìƒ‰ ë°•ìŠ¤ëŠ” ëŒ€ê¸°(pending) ìƒíƒœì˜ í”„ë¡œë¯¸ìŠ¤ì´ë‹¤.

ê²°êµ­, **í”„ë¡œë¯¸ìŠ¤ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœì™€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´**ë¼ê³  ì •ë¦¬í•  ìˆ˜ ìžˆë‹¤.

# [03] í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ

í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ ì´ì— ë”°ë¥¸ í›„ì† ì²˜ë¦¬ê°€ ì¼ì–´ë‚˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ í”„ë¡œë¯¸ìŠ¤ëŠ” í›„ì† ë©”ì„œë“œ then, catch, finallyë¥¼ ì œê³µí•œë‹¤.

ê·¸ë¦¬ê³  ì´ ë©”ì„œë“œë“¤ì€ ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

## 1) then

then ë©”ì„œë“œëŠ” ë‘ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

- ì²« ë²ˆì§¸ ì½œë°± í•¨ìˆ˜(ì„±ê³µ ì²˜ë¦¬) : í”„ë¡œë¯¸ìŠ¤ê°€ fulfilled ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œ, resultë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ìŒ

- ë‘ ë²ˆì§¸ ì½œë°± í•¨ìˆ˜(ì‹¤íŒ¨ ì²˜ë¦¬) : í”„ë¡œë¯¸ìŠ¤ê°€ refected ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œ, ì—ëŸ¬ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ìŒ

```jsx
new Promise((resolve) => resolve("fulfilled")).then(
  (v) => console.log(v),
  (e) => console.error(e)
); // fulfilled

new Promise((_, reject) => reject(new Error("rejected"))).then(
  (v) => console.log(v),
  (e) => console.error(e)
); // Error: rejected
```

## 2) catch

catch ë©”ì„œë“œëŠ” í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

í”„ë¡œë¯¸ìŠ¤ê°€ rejected ìƒíƒœì¸ ê²½ìš°ë§Œ í˜¸ì¶œëœë‹¤.

```jsx
new Promise((_, reject) => reject(new Error("rejected"))).catch((e) =>
  console.log(e)
); // Error: rejected
```

## 3) finally

finally ë©”ì„œë“œëŠ” í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

í”„ë¡œë¯¸ìŠ¤ì˜ ì„±ê³µ/ì‹¤íŒ¨ì™€ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í•œ ë²ˆ í˜¸ì¶œëœë‹¤.

í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœì™€ ìƒê´€ì—†ì´ ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•´ì•¼ í•  ì²˜ë¦¬ ë‚´ìš©ì´ ìžˆì„ ë•Œ ìœ ìš©í•˜ë‹¤.

```jsx
new Promise(() => {}).finally(() => console.log("finally")); // finally
```

# [04] í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ ì²˜ë¦¬

ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± í•¨ìˆ˜ì˜ ì—ëŸ¬ ì²˜ë¦¬ì˜ í•œê³„ë¥¼ ë³´ì™„í•˜ê³ ìž í”„ë¡œë¯¸ìŠ¤ê°€ ë“±ìž¥í–ˆë‹¤ê³  í•˜ì˜€ë‹¤.

ê·¸ë ‡ë‹¤ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ ì²˜ë¦¬ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?

ë°”ë¡œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œë“¤ì„ ì´ìš©í•´ì£¼ë©´ ëœë‹¤.

1. **then ë©”ì„œë“œì˜ ë‘ ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ë¡œ ì²˜ë¦¬**

```jsx
const wrongUrl = "https://jsonplaceholder.typicode.com/XXX/1";

promiseGet(wrongUrl).then(
	res => console.log(res),
	err => console.error(err)
); // Error: 404
```

2. **catch ë©”ì„œë“œë¡œ ì²˜ë¦¬**

```jsx
const wrongUrl = "https://jsonplaceholder.typicode.com/XXX/1";

promiseGet(wrongUrl)
	.then(res => console.log(res))
	.catch(err => console.error(err)); //Error: 404
```

ë‘˜ ì¤‘ ê°€ë…ì„± ë©´ì—ì„œ catch ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢€ ë” ì¢‹ì•„ë³´ì´ë¯€ë¡œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•  ê²½ìš°ì—ëŠ” 2ë²ˆì§¸ ë°©ë²•ì„ ì´ìš©í•˜ìž !

# [05] í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹

catch ë©”ì„œë“œë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œì—ì„œ thenë©”ì„œë“œì™€ catchë©”ì„œë“œê°€ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œë˜ì—ˆë‹¤.

ê·¸ëŸ°ë° í”„ë¡œë¯¸ìŠ¤ í›„ì† ë©”ì†Œë“œë“¤ì€ ëª¨ë‘ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì´ë¥¼ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ë¼ê³  í•œë‹¤.

```jsx
new Promise(function (resolve, reject) {
  setTimeout(() => resolve(1), 1000); // (*)
})
  .then(function (result) {
    // (**)

    alert(result); // 1
    return result * 2;
  })
  .then(function (result) {
    // (***)

    alert(result); // 2
    return result * 2;
  })
  .then(function (result) {
    alert(result); // 4
    return result * 2;
  });
```

# [06] í”„ë¡œë¯¸ìŠ¤ì˜ ì •ì  ë©”ì†Œë“œ

## 1) Promise.resolve / reject

Promise.resolveì™€ Promise.reject ë©”ì†Œë“œëŠ” ì¡´ìž¬í•˜ëŠ” ê°’ì„ Promiseë¡œ ëž˜í•‘í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

ì •ì  ë©”ì†Œë“œ Promise.resolve ë©”ì†Œë“œëŠ” ì¸ìžë¡œ ì „ë‹¬ëœ ê°’ì„ resolveí•˜ëŠ” Promiseë¥¼ ìƒì„±í•œë‹¤.

```jsx
const resolvedPromise = Promise.resolve([1, 2, 3]);
resolvedPromise.then(console.log); // [ 1, 2, 3 ]
```

Promise.reject ë©”ì†Œë“œëŠ” ì¸ìžë¡œ ì „ë‹¬ëœ ê°’ì„ rejectí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

```jsx
const rejectedPromise = Promise.reject(new Error("Error!"));
rejectedPromise.catch(console.log); // Error: Error!
```

## **2) Promise.all**

Promise.all ë©”ì†Œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ ë‹´ê²¨ ìžˆëŠ” ë°°ì—´ ë“±ì˜Â ì´í„°ëŸ¬ë¸”ì„ ì¸ìžë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤.

ì „ë‹¬ë°›ì€ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ê³  ê·¸ ì²˜ë¦¬ ê²°ê³¼ë¥¼ resolveí•˜ëŠ” ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
Promise.all([
  new Promise((resolve) => setTimeout(() => resolve(1), 3000)), // 1
  new Promise((resolve) => setTimeout(() => resolve(2), 2000)), // 2
  new Promise((resolve) => setTimeout(() => resolve(3), 1000)), // 3
])
  .then(console.log) // [ 1, 2, 3 ]
  .catch(console.log);
```

Promise.all ë©”ì†Œë“œëŠ” 3ê°œì˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë‹´ì€ ë°°ì—´ì„ ì „ë‹¬ë°›ì•˜ë‹¤.

- ì²«ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ : 3ì´ˆ í›„ì— 1ì„ resolveí•˜ì—¬ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

- ë‘ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ : 2ì´ˆ í›„ì— 2ì„ resolveí•˜ì—¬ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

- ì„¸ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ : 1ì´ˆ í›„ì— 3ì„ resolveí•˜ì—¬ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

Promise.all ë©”ì†Œë“œëŠ” ì „ë‹¬ë°›ì€ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•œë‹¤. ì´ë•Œ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ ì•„ëž˜ì™€ ëª¨ë“  ì²˜ë¦¬ ê²°ê³¼ë¥¼ resolve ë˜ëŠ” rejectí•œë‹¤.

- ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ê°€ ì„±ê³µí•˜ë©´Â **ê°ê°ì˜ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°°ì—´ì— ë‹´ì•„ resolveí•˜ëŠ” ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜ë˜ê³  ì²˜ë¦¬ ìˆœì„œê°€ ë³´ìž¥ëœë‹¤.**

- í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ê°€ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ê°€ìž¥ ë¨¼ì € ì‹¤íŒ¨í•œ í”„ë¡œë¯¸ìŠ¤ê°€ rejectí•œ ì—ëŸ¬ë¥¼ rejectí•˜ëŠ” ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì¦‰ì‹œ ë°˜í™˜í•œë‹¤.

```jsx
Promise.all([
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 1!")), 3000)
  ),
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 2!")), 2000)
  ),
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 3!")), 1000)
  ),
])
  .then(console.log)
  .catch(console.log); // Error: Error 3!
```

ìœ„ ì˜ˆì œì˜ ê²½ìš°, ì„¸ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ê°€ 1ì´ˆ í›„ì— ì‹¤í–‰ë˜ì–´ ê°€ìž¥ ë¨¼ì € ì‹¤íŒ¨í•˜ë¯€ë¡œ ì„¸ë²ˆì§¸ í”„ë¡œë¯¸ìŠ¤ê°€ rejectí•œ ì—ëŸ¬ê°€ catch ë©”ì†Œë“œë¡œ ì „ë‹¬ëœë‹¤.

Promise.all ë©”ì†Œë“œëŠ” ì „ë‹¬ ë°›ì€ ì´í„°ëŸ¬ë¸”ì˜ ìš”ì†Œê°€ í”„ë¡œë¯¸ìŠ¤ê°€ ì•„ë‹Œ ê²½ìš°, Promise.resolve ë©”ì†Œë“œë¥¼ í†µí•´ í”„ë¡œë¯¸ìŠ¤ë¡œ ëž˜í•‘ëœë‹¤.

```jsx
Promise.all([
  1, // => Promise.resolve(1)
  2, // => Promise.resolve(2)
  3, // => Promise.resolve(3)
])
  .then(console.log) // [1, 2, 3]
  .catch(console.log);
```

## **3) Promise.race**

Promise.race ë©”ì†Œë“œëŠ” Promise.all ë©”ì†Œë“œì™€ ë™ì¼í•˜ê²Œ í”„ë¡œë¯¸ìŠ¤ê°€ ë‹´ê²¨ ìžˆëŠ” ë°°ì—´ ë“±ì˜Â ì´í„°ëŸ¬ë¸”ì„ ì¸ìžë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤.

ê·¸ë¦¬ê³  Promise.race ë©”ì†Œë“œëŠ” Promise.all ë©”ì†Œë“œì²˜ëŸ¼ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°€ìž¥ ë¨¼ì € ì²˜ë¦¬ëœ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ resolveí•˜ëŠ” ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
Promise.race([
  new Promise((resolve) => setTimeout(() => resolve(1), 3000)), // 1
  new Promise((resolve) => setTimeout(() => resolve(2), 2000)), // 2
  new Promise((resolve) => setTimeout(() => resolve(3), 1000)), // 3
])
  .then(console.log) // 3
  .catch(console.log);
```

ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš°ëŠ” Promise.all ë©”ì†Œë“œì™€ ë™ì¼í•˜ê²Œ ì²˜ë¦¬ëœë‹¤.

```jsx
Promise.race([
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 1!")), 3000)
  ),
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 2!")), 2000)
  ),
  new Promise((resolve, reject) =>
    setTimeout(() => reject(new Error("Error 3!")), 1000)
  ),
])
  .then(console.log)
  .catch(console.log); // Error: Error 3!
```

## 4) Promise.allSetteled

Promise.allSetteled ë©”ì†Œë“œë„ í”„ë¡œë¯¸ìŠ¤ê°€ ë‹´ê²¨ ìžˆëŠ” ë°°ì—´ ë“±ì˜Â ì´í„°ëŸ¬ë¸”ì„ ì¸ìžë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤.

ì „ë‹¬ë°›ì€ í”„ë¡œë¯¸ìŠ¤ê°€ ëª¨ë‘ settled ìƒíƒœê°€ ë˜ë©´ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜í•œë‹¤.

```jsx
Promise.allSettled([
  new Promise((resolve) => setTimeout(() => resolve(1), 2000)),
  new Promise((_, reject) =>
    setTimeout(() => reject(new Error("Error!")), 1000)
  ),
]).then(console.log);
/*
[
	{status: 'fulfilled', value: 1} 
	{status: 'rejected', reason: Error: Error!}
]
*/
```

# [07] ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í

ì´ì „ì— ë°°ì› ë˜ ì½œë°± í•¨ìˆ˜ëŠ” íƒœìŠ¤í¬ íì— ì €ìž¥ëœë‹¤ê³  í•˜ì˜€ë‹¤.

ê·¸ëŸ°ë° í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ëŠ” íƒœìŠ¤í¬ íê°€ ì•„ë‹Œ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì— ì €ìž¥ëœë‹¤.

```jsx
setTimeout(() => console.log(1), 0);

Promise.resolve()
  .then(() => console.log(2))
  .then(() => console.log(3));

// ë§ˆì´í¬ë¡œ íƒœìŠ¤í¬ íê°€ ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ìœ¼ë¯€ë¡œ 2->3->1 ìˆœì„œë¡œ ì¶œë ¥ëœë‹¤.
```

ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íëŠ” íƒœìŠ¤í¬ íë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤ëŠ” ê²ƒì´ íŠ¹ì§•ì´ë‹¤.

ì´ë²¤íŠ¸ ë£¨í”„ê°€ ì½œ ìŠ¤íƒì´ ë¹„ë©´ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì—ì„œ ëŒ€ê¸°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì ¸ì™€ ì‹¤í–‰í•œë‹¤.

# [08] fetch

fetch ë©”ì„œë“œëŠ” ì„œë²„ì— ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë³´ë‚´ê³  ë°›ì•„ì˜¤ëŠ” ë°©ë²•ìœ¼ë¡œ ìžì£¼ ì‚¬ìš©ë˜ëŠ” ì¹œêµ¬ì´ë‹¤.

XMLHttpRequest ê°ì²´ë³´ë‹¤ ì‚¬ìš©ë²•ì´ ê°„ë‹¨í•˜ê³  í”„ë¡œë¯¸ìŠ¤ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì½œë°± íŒ¨í„´ì˜ ë‹¨ì ì—ì„œ ìžìœ ë¡­ë‹¤.

ðŸ” ê¸°ë³¸ ë¬¸ë²•

```jsx
let promise = fetch(url, [options]);
// url: ì ‘ê·¼í•˜ê³ ìž í•˜ëŠ” url
// options : ì„ íƒ ë§¤ê°œë³€ìˆ˜, methodë‚˜ headerë¥¼ ì§€ì •í•  ìˆ˜ ìžˆìŒ(ì•„ë¬´ê²ƒë„ ë„˜ê¸°ì§€ ì•Šìœ¼ë©´ GETë©”ì„œë“œë¡œ ì§„í–‰)
```

fetch()ë¥¼ í˜¸ì¶œí•˜ê³  json ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì—­ì§ë ¬í™”ë¥¼ ì‹œì¼œì£¼ë©´ ì•„ëž˜ì™€ ê°™ì´ ì¶œë ¥ëœë‹¤.

```jsx
fetch("https://jsonplaceholder.typicode.com/todos/1")
  .then((response) => response.json()) // ì—­ì§ë ¬í™”
  .then((json) => console.log(json));

/*
{
  "userId": 1,
  "id": 1,
  "title": "delectus aut autem",
  "completed": false
}
*/
```
